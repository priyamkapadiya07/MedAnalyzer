<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Medical Analyzer</title>
    {% load static %}
    <link
      rel="icon"
      type="image/x-icon"
      href="{% static 'images/fevicon.ico' %}" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@500;700&display=swap"
      rel="stylesheet" />

    {% if request.path == '/' %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}" />
    {% elif request.path == '/upload/' %}
    <link rel="stylesheet" href="{% static 'css/upload.css' %}" />
    {% comment %} {% elif request.path == '/login/' %}
    <link rel="stylesheet" href="{% static 'css/login.css' %}" /> {% endcomment %}
    {% comment %} {% elif request.path == '/signup/' %}
    <link rel="stylesheet" href="{% static 'css/signup.css' %}" /> {% endcomment %}
    {% elif request.path == '/reports/' %}
    <link rel="stylesheet" href="{% static 'css/reports_list.css' %}" />
    {% elif '/report/' in request.path %}
    <link rel="stylesheet" href="{% static 'css/report_details.css' %}" />
    {% elif request.path == '/QandA/' %}
    <link rel="stylesheet" href="{% static 'css/Q&A.css' %}" />
    {% comment %} {% elif request.path == '/chatbot/' %}
    <link rel="stylesheet" href="{% static 'css/chatbot.css' %}" /> {% endcomment %}
    {% endif %}
    <script src="{% static 'js/theme.js' %}"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      defer></script>

    <style>
      body {
        transition: background-color 0.4s ease, color 0.4s ease;
      }

      .navbar-brand {
        font-family: "Ubuntu", sans-serif;
        font-weight: 700;
        font-size: 1.5rem;
        letter-spacing: 1px;
        color: #ffffff !important;
        transition: transform 0.3s ease;
      }

      .navbar-brand:hover {
        transform: scale(1.05);
      }
      .navbar .fa-user-circle {
        font-size: 1.2rem;
        color: #ffffff;
      }

      .navbar .text-white {
        font-weight: 500;
      }
      .dropdown-item.text-muted {
        cursor: default;
        background-color: transparent;
      }

      .footer-link {
        color: #ccc;
        text-decoration: none;
        display: block;
        margin-bottom: 8px;
        transition: all 0.3s ease;
      }

      .footer-link:hover {
        color: #ffffff;
        text-decoration: underline;
        transform: translateX(4px);
      }

      footer h5,
      footer h6 {
        color: #ffffff;
      }

      footer p {
        font-size: 0.9rem;
      }

      footer i {
        color: #0d6efd;
      }

      {% comment %} Chatbot css {% endcomment %}
      .chatbot-btn {
            position: fixed;
            bottom: 30px;
            right: 25px;
            z-index: 1000;
            background-color: #0d6efd;
            color: white;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, background-color 0.3s ease;
            animation: pop-in 0.5s ease;
            overflow: visible;
          }

          .chatbot-btn:hover {
            transform: scale(1.1);
            background-color: #0b5ed7;
          }

          .icon-wrapper {
            position: relative;
            display: flex;
            width: 55px;
            height: 55px;
            align-items: center;
            justify-content: center;
          }

            .icon-wrapper:before {
              content: "";
              position: absolute;
              top: 50%;
              left: 50%;
              width: 75px;
              height: 75px;
              background-color: rgba(25, 77, 155, 0.35);
              border-radius: 50%;
              transform: translate(-50%, -50%) scale(0.6);
              animation: pulsate 1.8s ease-out infinite;
              z-index: -1;
          }

            @keyframes pulsate {
              0% {
                transform: translate(-50%, -50%) scale(0.6);
                opacity: 0;
              }
              50% {
                opacity: 1;
              }
              100% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 0;
              }
          }

          @keyframes pop-in {
            from {
              opacity: 0;
              transform: scale(0.5) translateY(50px);
            }
            to {
              opacity: 1;
              transform: scale(1) translateY(0);
            }
          }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
      <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'home' %}">üè• MedAnalyzer</a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarContent"
          aria-controls="navbarContent"
          aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div
          class="collapse navbar-collapse justify-content-end"
          id="navbarContent">
          <ul class="navbar-nav align-items-center gap-2">
            {% if username %}
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle text-white fw-semibold"
                href="#"
                id="profileDropdown"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false">
                <i class="fas fa-user-circle me-1"></i> {{ username }}
              </a>
              <ul
                class="dropdown-menu dropdown-menu-end"
                aria-labelledby="profileDropdown">
                <li class="dropdown-item text-muted small">
                  <i class="fas fa-envelope me-2 text-secondary"></i> {{email}}
                </li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a
                    class="dropdown-item text-danger"
                    href="{% url 'logout' %}">
                    <i class="fas fa-sign-out-alt me-2"></i>Logout
                  </a>
                </li>
              </ul>
            </li>
            {% else %}
            <li class="nav-item">
              <a class="btn btn-outline-light btn-sm" href="{% url 'login' %}"
                >Login</a
              >
            </li>
            {% endif %}

            <li class="nav-item">
              <button
                id="theme-toggle"
                class="btn btn-outline-light btn-sm ms-1">
                <i class="fas fa-moon"></i> Dark Mode
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="toast-container position-fixed top-0 end-0 p-3">
      {% if messages %} {% for message in messages %}
      <div
        class="toast align-items-center text-white bg-primary border-0 show mb-2"
        role="alert">
        <div class="d-flex">
          <div class="toast-body">
            <i class="fas fa-circle-info me-2"></i> {{ message }}
          </div>
          <button
            type="button"
            class="btn-close btn-close-white me-2 m-auto"
            data-bs-dismiss="toast">
            close
          </button>
        </div>
      </div>
      {% endfor %} {% endif %}
    </div>

    <div class="container my-4">{% block content %}{% endblock %}</div>
    <footer class="footer bg-dark text-white pt-5 pb-4 mt-auto">
      <div class="container text-md-start">
        <div class="row">
          <!-- Brand & About -->
          <div class="col-md-4 col-lg-4 col-xl-4 mx-auto mb-4">
            <h5 class="text-uppercase fw-bold mb-3">üè• MedAnalyzer</h5>
            <p class="small">
              Your AI-based medical report assistant ‚Äî upload, analyze, track,
              and get smart suggestions for a healthier tomorrow.
            </p>
          </div>

          <!-- Quick Links -->
          <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mb-4">
            <h6 class="text-uppercase fw-semibold mb-3">Quick Links</h6>
            <ul class="list-unstyled">
              <li><a href="{% url 'home' %}" class="footer-link">Home</a></li>
              <li>
                <a href="{% url 'upload' %}" class="footer-link"
                  >Upload Report</a
                >
              </li>
              <li>
                <a href="{% url 'reports' %}" class="footer-link">My Reports</a>
              </li>
            </ul>
          </div>

          <!-- Contact Info -->
          <div class="col-md-5 col-lg-5 col-xl-5 mx-auto mb-md-0 mb-4">
            <h6 class="text-uppercase fw-semibold mb-3">Contact</h6>
            <p class="mb-1">
              <i class="fas fa-envelope me-2"></i> priyampatel968@gmail.com
            </p>
            <p class="mb-1">
              <i class="fas fa-phone me-2"></i> +91 96872 32448
            </p>
            <p class="">
              <i class="fas fa-map-marker-alt me-2"></i> Gujarat, India
            </p>
          </div>
        </div>

        <hr class="border-light opacity-25" />

        <div class="text-center small text-secondary">
          &copy; 2025 MedAnalyzer. All rights reserved.
        </div>
      </div>
    </footer>
    {% comment %} Chatbot code {% endcomment %} {% if request.path == '/' %}
    <a href="{% url 'chatbot' %}" class="chatbot-btn" title="Open Chatbot">
      <span class="icon-wrapper">
        <i class="fas fa-comments"></i>
      </span>
    </a>
    {% endif %}
  </body>
</html>
